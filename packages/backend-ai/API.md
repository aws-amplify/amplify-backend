## API Report File for "@aws-amplify/backend-ai"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { ContentBlock } from '@aws-sdk/client-bedrock-runtime';
import type { SystemContentBlock } from '@aws-sdk/client-bedrock-runtime';
import type { ToolChoice } from '@aws-sdk/client-bedrock-runtime';
import type { ToolResultContentBlock } from '@aws-sdk/client-bedrock-runtime';
import type { ToolSpecification } from '@aws-sdk/client-bedrock-runtime';

// @public (undocumented)
export type AIMessage = {
    role: 'user' | 'assistant';
    content: SupportedMessageContentBlock[];
};

// @public (undocumented)
export type ConversationMessage = AIMessage & {
    id: string;
    sessionId: string;
};

// @public (undocumented)
export type DistributiveOmit<T, K extends keyof T> = T extends any ? Omit<T, K> : never;

// @public (undocumented)
export type GetConversationMessageInput = {
    systemPrompts: SystemPromptContent[];
    messages: AIMessage[];
    modelId: string;
    onToolUseMessage?: (message: AIMessage) => Promise<void>;
    onToolResultMessage?: (message: AIMessage) => Promise<void>;
    toolConfiguration: {
        tools?: Tool[];
        toolUseStrategy?: ToolUseStrategy;
    };
};

// @public
export const getConversationMessageWithoutResolvingToolUsage: (input: GetConversationMessageWithoutResolvingToolUsageInput) => Promise<GetConversationMessageWithoutResolvingToolUsageOutput>;

// @public (undocumented)
export type GetConversationMessageWithoutResolvingToolUsageInput = {
    systemPrompts: SystemPromptContent[];
    messages: Omit<AIMessage[], 'id' | 'sessionId'>;
    modelId: string;
    toolConfiguration?: {
        tools?: Tool[];
        toolUseStrategy?: ToolUseStrategy;
    };
};

// @public (undocumented)
export type GetConversationMessageWithoutResolvingToolUsageOutput = {
    output: {
        message: {
            role: 'user' | 'assistant';
            content: SupportedMessageContentBlock[];
        };
    };
    stopReason: 'end_turn' | 'tool_use' | 'max_tokens' | 'stop_sequence' | 'guardrail_intervened' | 'content_filtered';
    usage: {
        inputTokens?: number;
        outputTokens?: number;
        totalTokens?: number;
    };
    metrics: {
        latencyMs?: number;
    };
    additionalModelResponseFields?: JSONLike;
};

// @public (undocumented)
export type JSONLike = string | number | boolean | null | {
    [key: string]: JSONLike;
} | JSONLike[];

// @public (undocumented)
export type JSONSchema = {
    type: string;
    properties?: Record<string, JSONSchema>;
    required?: string[];
    items?: JSONSchema;
    enum?: (string | number | boolean | null)[];
    minimum?: number;
    maximum?: number;
    minLength?: number;
    maxLength?: number;
    pattern?: string;
    format?: string;
    description?: string;
    default?: JSONLike;
    additionalProperties?: boolean | JSONSchema;
};

// @public (undocumented)
export type SupportedMessageContentBlock = DistributiveOmit<ContentBlock.TextMember | ContentBlock.ImageMember | ContentBlock.ToolResultMember | ContentBlock.ToolUseMember, '$unknown' | 'document' | 'guardContent'>;

// @public (undocumented)
export type SupportedToolChoice = DistributiveOmit<ToolChoice.AnyMember | ToolChoice.AutoMember | ToolChoice.ToolMember, '$unknown'>;

// @public (undocumented)
export type SupportedToolResultContentBlock = SupportedToolResultsTextContent | SupportedToolResultsImageContent | SupportedToolResultsJsonContent;

// @public (undocumented)
export type SupportedToolResultsImageContent = Pick<ToolResultContentBlock.ImageMember, 'image'>;

// @public (undocumented)
export type SupportedToolResultsJsonContent = Pick<ToolResultContentBlock.JsonMember, 'json'>;

// @public (undocumented)
export type SupportedToolResultsTextContent = Pick<ToolResultContentBlock.TextMember, 'text'>;

// @public (undocumented)
export type SystemPromptContent = Omit<SystemContentBlock.TextMember, '$unknown' | 'guardContent'>;

// @public (undocumented)
export type Tool = ToolSpecification & {
    type: 'custom' | 'ui';
    use: (args: JSONLike) => Promise<SupportedToolResultContentBlock[]>;
};

// @public (undocumented)
export type ToolUseStrategy = {
    strategy: 'any';
} | {
    strategy: 'specific';
    name: string;
};

// (No @packageDocumentation comment for this package)

```
